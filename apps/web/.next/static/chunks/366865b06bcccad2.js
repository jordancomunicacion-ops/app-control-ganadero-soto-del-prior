(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26732,95107,e=>{"use strict";var t=e.i(47167),r=e.i(43476),n=e.i(71645);class s extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${r}`}}class o extends s{}class a extends s{}async function i(e,t,r,n={}){let s=`${c(t)}/${e}`;try{let e={headers:{"Content-Type":"application/json",...n?.headers?.cookie?{cookie:n.headers.cookie}:{}}};n?.body&&(e.body=JSON.stringify(n.body),e.method="POST");let t=await fetch(s,e),r=await t.json();if(!t.ok)throw r;return r}catch(e){return r.error(new o(e.message,e)),null}}function c(e){return"undefined"==typeof window?`${e.baseUrlServer}${e.basePathServer}`:e.basePath}function l(){return Math.floor(Date.now()/1e3)}function u(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let r=new URL(e||t),n=("/"===r.pathname?t.pathname:r.pathname).replace(/\/$/,""),s=`${r.origin}${n}`;return{origin:r.origin,host:r.host,path:n,base:s,toString:()=>s}}let d={baseUrl:u(t.default.env.NEXTAUTH_URL??t.default.env.VERCEL_URL).origin,basePath:u(t.default.env.NEXTAUTH_URL).path,baseUrlServer:u(t.default.env.NEXTAUTH_URL_INTERNAL??t.default.env.NEXTAUTH_URL??t.default.env.VERCEL_URL).origin,basePathServer:u(t.default.env.NEXTAUTH_URL_INTERNAL??t.default.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},f=null;function h(){return"undefined"==typeof BroadcastChannel?{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{},name:"next-auth",onmessage:null,onmessageerror:null,close:()=>{},dispatchEvent:()=>!1}:new BroadcastChannel("next-auth")}function v(){return null===f&&(f=h()),f}let g={debug:console.debug,error:console.error,warn:console.warn},y=n.createContext?.(void 0);async function w(e){let t=await i("session",d,g,e);return(e?.broadcast??!0)&&h().postMessage({event:"session",data:{trigger:"getSession"}}),t}async function S(){let e=await i("csrf",d,g);return e?.csrfToken??""}async function p(e){let{redirect:t=!0,redirectTo:r=e?.callbackUrl??window.location.href}=e??{},n=c(d),s=await S(),o=await fetch(`${n}/signout`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:s,callbackUrl:r})}),a=await o.json();if(v().postMessage({event:"session",data:{trigger:"signout"}}),t){let e=a.url??r;window.location.href=e,e.includes("#")&&window.location.reload();return}return await d._getSession({event:"storage"}),a}function E(e){if(!y)throw Error("React Context is unavailable in Server Components");let{children:t,basePath:s,refetchInterval:o,refetchWhenOffline:c}=e;s&&(d.basePath=s);let u=void 0!==e.session;d._lastSync=u?l():0;let[f,h]=n.useState(()=>(u&&(d._session=e.session),e.session)),[p,E]=n.useState(!u);n.useEffect(()=>(d._getSession=async({event:e}={})=>{try{let t="storage"===e;if(t||void 0===d._session){d._lastSync=l(),d._session=await w({broadcast:!t}),h(d._session);return}if(!e||null===d._session||l()<d._lastSync)return;d._lastSync=l(),d._session=await w(),h(d._session)}catch(e){g.error(new a(e.message,e))}finally{E(!1)}},d._getSession(),()=>{d._lastSync=0,d._session=void 0,d._getSession=()=>{}}),[]),n.useEffect(()=>{let e=()=>d._getSession({event:"storage"});return v().addEventListener("message",e),()=>v().removeEventListener("message",e)},[]),n.useEffect(()=>{let{refetchOnWindowFocus:t=!0}=e,r=()=>{t&&"visible"===document.visibilityState&&d._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",r,!1),()=>document.removeEventListener("visibilitychange",r,!1)},[e.refetchOnWindowFocus]);let m=function(){let[e,t]=n.useState("undefined"!=typeof navigator&&navigator.onLine),r=()=>t(!0),s=()=>t(!1);return n.useEffect(()=>(window.addEventListener("online",r),window.addEventListener("offline",s),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}),[]),e}(),_=!1!==c||m;n.useEffect(()=>{if(o&&_){let e=setInterval(()=>{d._session&&d._getSession({event:"poll"})},1e3*o);return()=>clearInterval(e)}},[o,_]);let b=n.useMemo(()=>({data:f,status:p?"loading":f?"authenticated":"unauthenticated",async update(e){if(p)return;E(!0);let t=await i("session",d,g,void 0===e?void 0:{body:{csrfToken:await S(),data:e}});return E(!1),t&&(h(t),v().postMessage({event:"session",data:{trigger:"getSession"}})),t}}),[f,p]);return(0,r.jsx)(y.Provider,{value:b,children:t})}e.s(["SessionProvider",()=>E,"signOut",()=>p],26732);let m=(0,n.createContext)(void 0);function _({children:e}){let[t,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{s(!0)},[]),(0,r.jsx)(m.Provider,{value:{read:(e,t)=>{try{let r=localStorage.getItem(e);if(!r)return t;try{return JSON.parse(r)}catch(e){if(Array.isArray(t)&&"string"==typeof r)return t;return r}}catch(e){return t}},write:(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(r){if("QuotaExceededError"===r.name||22===r.code||1014===r.code){console.warn(`Storage Quota Exceeded while writing "${e}". Trying emergency cleanup...`);try{if("events"!==e){console.warn('Clearing "events" history to free up space for critical data.'),localStorage.removeItem("events");try{localStorage.setItem(e,JSON.stringify(t)),console.log(`Successfully recovered write for "${e}" after cleanup.`);return}catch(r){console.error(`Emergency write failed for "${e}" even after cleanup. Payload size: ${JSON.stringify(t).length} chars.`,r)}}else console.error("Critical: Cannot write 'events'. Storage full.")}catch(e){console.error("Emergency cleanup and retry sequence failed:",e)}}else console.error(`Error writing key "${e}":`,r)}},isLoaded:t},children:e})}function b(){let e=(0,n.useContext)(m);if(void 0===e)throw Error("useStorage must be used within a StorageProvider");return e}e.s(["StorageProvider",()=>_,"useStorage",()=>b],95107)},35944,e=>{"use strict";var t=e.i(43476),r=e.i(26732),n=e.i(95107);function s({children:e}){return(0,t.jsx)(r.SessionProvider,{children:(0,t.jsx)(n.StorageProvider,{children:e})})}e.s(["Providers",()=>s])}]);