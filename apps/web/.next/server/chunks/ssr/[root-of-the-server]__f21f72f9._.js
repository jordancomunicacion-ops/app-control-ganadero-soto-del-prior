module.exports=[54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},63021,(a,b,c)=>{b.exports=a.x("@prisma/client-2c3a283f134fdcb6",()=>require("@prisma/client-2c3a283f134fdcb6"))},37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},82919,a=>{"use strict";var b=a.i(37936),c=a.i(47525);a.i(40522);var d=a.i(9349),e=a.i(53112);let f=e.z.object({id:e.z.string(),name:e.z.string().min(1,{message:"El nombre es obligatorio."}),email:e.z.string().email({message:"Email inválido."}),password:e.z.string().min(6,{message:"La contraseña debe tener al menos 6 caracteres."}).optional(),role:e.z.enum(["ADMIN","USER"])}).omit({id:!0}).extend({password:e.z.string().min(6,{message:"La contraseña es obligatoria."})});var g=a.i(72849),h=a.i(63021);a.i(70396);var i=a.i(73727),j=a.i(13095);let k=new h.PrismaClient;async function l(a,b){try{await (0,c.signIn)("credentials",b)}catch(a){if(a instanceof d.AuthError)if("CredentialsSignin"===a.type)return"Credenciales inválidas.";else return"Algo salió mal.";throw a}}async function m(){await (0,c.signOut)()}async function n(a,b){let c=f.safeParse({name:b.get("name"),email:b.get("email"),password:b.get("password"),role:"USER"});if(!c.success)return{errors:c.error.flatten().fieldErrors,message:"Faltan campos obligatorios."};let{name:d,email:e,password:h,role:j}=c.data,l=await g.default.hash(h,10);try{await k.user.create({data:{name:d,email:e,password:l,role:j}})}catch(a){if("P2002"===a.code)return{message:"El email ya está en uso."};return{message:"Error de base de datos."}}(0,i.redirect)("/login")}(0,j.ensureServerEntryExports)([l,m,n]),(0,b.registerServerReference)(l,"603e4727faefabda0a5777380b2ef0af89adc54729",null),(0,b.registerServerReference)(m,"00f3769939c9ecb77d977e1e5e15e32351d8812dac",null),(0,b.registerServerReference)(n,"60fc680c355e56bb8d6f55e737383470c2d73f7edd",null),a.s(["authenticate",()=>l,"registerUser",()=>n],82919)},70712,a=>{"use strict";var b=a.i(82919);a.s([],68841),a.i(68841),a.s(["603e4727faefabda0a5777380b2ef0af89adc54729",()=>b.authenticate],70712)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f21f72f9._.js.map